<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>South Width</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#0e0e0e;color:#fff}

/* NAV */
header{
  position:fixed;top:0;width:100%;
  padding:20px 60px;
  background:rgba(0,0,0,.7);
  backdrop-filter:blur(10px);
  z-index:100
}
.nav{display:flex;justify-content:space-between;align-items:center}
.logo{font-weight:900;letter-spacing:2px}
.menu a,#userName{margin-left:20px;color:#fff;text-decoration:none;font-size:14px}
.menu a:hover{opacity:.7}
#userName{color:#aaa}

/* HERO */
main{
  height:100vh;
  display:flex;
  align-items:center;
  padding:0 60px
}
.hero h1{font-size:64px}
.hero h2{font-size:64px;color:#555}
.hero p{color:#aaa;margin:20px 0}
.btn{
  display:inline-block;
  padding:12px 28px;
  border:1px solid #fff;
  color:#fff;
  text-decoration:none;
  transition:.3s
}
.btn:hover{background:#fff;color:#000}

/* PRODUCTOS */
#ropa{padding:120px 60px}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:30px
}
.card{
  border:1px solid #333;
  padding:20px;
  text-align:center;
  transition:.3s
}
.card:hover{
  transform:translateY(-6px);
  box-shadow:0 20px 40px rgba(0,0,0,.6)
}
.card img{
  width:100%;height:220px;object-fit:cover;margin-bottom:15px
}
.card button{
  padding:10px 22px;
  background:#fff;border:none;
  font-weight:600;
  cursor:pointer;
  transition:.2s
}
.card button:hover{transform:translateY(-2px)}
.card button:active{transform:scale(.95)}

/* CARRITO */
#cartBtn{
  position:fixed;
  bottom:20px;right:20px;
  background:#fff;color:#000;
  padding:12px 20px;
  cursor:pointer;
  z-index:200;
}
#cartBtn.pulse{animation:pulse .3s}
@keyframes pulse{50%{transform:scale(1.15)}}

#cart{
  position:fixed;
  right:-360px;top:0;
  width:320px;height:100vh;
  background:rgba(15,15,15,.95);
  backdrop-filter:blur(10px);
  padding:20px;
  transition:.4s;
  box-shadow:-10px 0 40px rgba(0,0,0,.6);
  z-index:150
}
#cart.active{right:0}

.cart-item{
  opacity:0;
  animation:fade .3s forwards;
  margin-bottom:12px;
  font-size:14px
}
@keyframes fade{to{opacity:1}}

.cart-controls{
  display:flex;
  align-items:center;
  gap:8px;
  margin-top:6px
}
.cart-controls button{
  background:#333;
  border:none;
  color:#fff;
  width:22px;height:22px;
  cursor:pointer
}
.cart-controls span{min-width:20px;text-align:center}

.cart-remove{
  color:#ff5f5f;
  cursor:pointer;
  font-size:12px;
  margin-left:auto
}

.total{
  margin-top:20px;
  font-weight:700;
  font-size:16px
}

/* CONTACTO */
#contacto{
  padding:120px 60px;
  color:#aaa
}
</style>
</head>

<body>

<header>
  <div class="nav">
    <div class="logo">SOUTH WIDTH</div>
    <nav class="menu">
      <a href="#inicio">Inicio</a>
      <a href="#ropa">Ropa</a>
      <a href="#contacto">Contacto</a>
      <span id="userName"></span>
      <a href="login.html" id="loginLink">Login</a>
      <a href="#" id="logoutLink" style="display:none;">Salir</a>
    </nav>
  </div>
</header>

<main id="inicio">
  <div class="hero">
    <h1>STREETWEAR</h1>
    <h2>DESDE EL SUR</h2>
    <p>Marca urbana inspirada en el sur de Chile.</p>
    <a href="#ropa" class="btn">VER ROPA</a>
  </div>
</main>

<section id="ropa">
  <h2 style="margin-bottom:30px">Productos</h2>
  <div class="grid">
    <div class="card">
      <img src="https://picsum.photos/400/400?1">
      <h4>Polera Negra</h4>
      <p>$19.990</p>
      <button onclick="addToCart('Polera Negra',19990)">Agregar</button>
    </div>
    <div class="card">
      <img src="https://picsum.photos/400/400?2">
      <h4>Poler√≥n Oversize</h4>
      <p>$39.990</p>
      <button onclick="addToCart('Poler√≥n Oversize',39990)">Agregar</button>
    </div>
  </div>
</section>

<section id="contacto">
  <h2>Contacto</h2>
  <p>üìç Sur de Chile</p>
  <p>üìß contacto@southwidth.cl</p>
</section>

<!-- CARRITO -->
<div id="cart">
  <h3>Carrito</h3>
  <div id="cartItems"></div>
  <div class="total" id="cartTotal">Total: $0</div>
</div>

<div id="cartBtn" onclick="toggleCart()">üõí Carrito</div>

<!-- FIREBASE AUTH -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth,onAuthStateChanged,signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAVyVlXFJuVF3snNO3fvQy1ud1WGo15ri4",
  authDomain: "south-width.firebaseapp.com",
  projectId: "south-width",
  storageBucket: "south-width.firebasestorage.app",
  messagingSenderId: "144617776304",
  appId: "1:144617776304:web:6ed82ac4dcb2354a620775"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loginLink=document.getElementById("loginLink");
const logoutLink=document.getElementById("logoutLink");
const userName=document.getElementById("userName");

onAuthStateChanged(auth,user=>{
  if(user){
    loginLink.style.display="none";
    logoutLink.style.display="inline-block";
    userName.textContent="Hola, "+(user.displayName||"Usuario");
  }else{
    loginLink.style.display="inline-block";
    logoutLink.style.display="none";
    userName.textContent="";
  }
});

logoutLink.onclick=e=>{
  e.preventDefault();
  signOut(auth).then(()=>location.reload());
};
</script>

<!-- CARRITO JS -->
<script>
let cart=[];

function addToCart(name,price){
  const item=cart.find(p=>p.name===name);
  if(item){item.qty++}
  else{cart.push({name,price,qty:1})}
  renderCart();
  animateCart();
}

function renderCart(){
  const container=document.getElementById("cartItems");
  container.innerHTML="";
  let total=0;

  cart.forEach((p,i)=>{
    total+=p.price*p.qty;
    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`
      <strong>${p.name}</strong><br>
      $${p.price} c/u
      <div class="cart-controls">
        <button onclick="changeQty(${i},-1)">-</button>
        <span>${p.qty}</span>
        <button onclick="changeQty(${i},1)">+</button>
        <span class="cart-remove" onclick="removeItem(${i})">Eliminar</span>
      </div>
    `;
    container.appendChild(div);
  });

  document.getElementById("cartTotal").textContent=
    "Total: $" + total.toLocaleString("es-CL");
}

function changeQty(i,val){
  cart[i].qty+=val;
  if(cart[i].qty<=0) cart.splice(i,1);
  renderCart();
}

function removeItem(i){
  cart.splice(i,1);
  renderCart();
}

function toggleCart(){
  document.getElementById("cart").classList.toggle("active");
}

function animateCart(){
  const btn=document.getElementById("cartBtn");
  btn.classList.add("pulse");
  setTimeout(()=>btn.classList.remove("pulse"),300);
}
</script>

</body>
</html>
